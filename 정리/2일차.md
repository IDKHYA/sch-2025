# 2일차

## 1\. 정적 컨텐츠 : html image 등

* 프로젝트\\src\\resours\\static or public (우선 순위는 static이 우선)\\ 정적 컨텐츠 저장
* 스프링부트에서 실행하지 않고, 브라우저에 전달
* 브라우저 실행

## 2\. View : 템플릿엔진(Thymleaf), 서블릿, JSP 파일 등

* 요청 시 스프링 부트의 실행 순서에 따라 호출
* DS(디스패치 서블릿) <--> 핸들러 매핑 <--> 해들러 어댑터 <--> 컨트롤러 실행결과 <--> 뷰 리졸버 <--> 뷰 리턴
* 뷰를 실행한 결과를 브라우저에 반환

## 실습

* 브라우저 : http://localhost:8080/spring
* /spring 컨텍스트 패스(context path)를 ---> SpringController.java
* SpringCotraller.java 실행결과 --> "Hello Spring!!"



## @RequestParam 객체를 통해 데이터 전송 -> Member 객체 생성

* MemberController.java

```
package com.sch.springboot.controller;

import com.sch.springboot.dto.Member;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestParam;

import java.lang.reflect.Parameter;

@Controller
public class MemberController {

    @GetMapping("/member")

    public String member(@RequestParam ("name") String name,
                         @RequestParam ("age") int age,
                         @RequestParam ("address") String address,
                         Model model){
        Member member = new Member();
        member.setName(name);
        member.setAge(age);
        member.setAddress(address);
        model.addAttribute("member",member);

        return "member"; //view name
    }
}
```

## 파라미터로 전송된 데이터를 @ModelAttribute를 통해 Member 객체 맵핑

* @MOdelAttribute를 통해서 매핑하는 경우, 파라미터의 name과 객체의 feild명이 동일해야 함

```
package com.sch.springboot.controller;

import com.sch.springboot.dto.Member;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestParam;
import java.lang.reflect.Parameter;
@Controller
public class MemberController {

    @GetMapping("/member")
    public String member(@ModelAttribute Member member,
                         Model model){
        model.addAttribute("member",member);
        return "member"; //view name
    }
}

```

## 입력 폼 -- post 방식 전송 > @PostMapping()

```

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>Member Form</h1>
<form action="/member-api" method = "post"> <!-- action : 서버주소, method : 전송방식(get or post) -->
    <ul>
        <li>
            <label>Name</label>
            <input type="text" name = "name"></input>
        </li>
        <li>
            <label>Age</label>
            <input type="number" name = "age" ></input>
        </li>
        <li>
            <label>Address</label>
            <input type="text" name = "address"></input>
        </li>
        <li>
            <label>Subject</label>
            <input type="text" name = "subject"></input>
        </li>
        <li>
            <button type="submit">send</button>
            <button type="reset">reset</button>
        </li>
    </ul>
</form>
</body>
</html>
```

\##로그인, 회원가입 - DTO, Controller, Service, Repository

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>회원가입</title>
</head>
<body>
    <h1>Sighup</h1>
    <form action ="/signup" method ="post">
        <ul>
            <li>
                <label>ID</label>
                <input type="text" name ="id"></input>
            </li>
            <li>
                <label>PASSWORD</label>
                <input type="password" name ="pass"></input>
            </li>
            <li>
                <label>NAME</label>
                <input type="text" name ="name"></input>
            </li>
            <li>
                <label>E-mail</label>
                <input type="text" name ="email"></input>
            </li>
            <li>
                <button type="submit">SighUp</button>
                <button type="reset">Cancle</button>
            </li>
        </ul>
    </form>
</body>
</html>
```

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>로그인</title>
</head>
<body>
<h1>Login</h1>
<form action ="/login" method ="post">
    <ul>
        <li>
            <label>ID</label>
            <input type="text" name ="id"></input>
        </li>
        <li>
            <label>PassWord</label>
            <input type="password" name ="pass"></input>
        </li>
        <li>
            <button type="submit">Login</button>
            <button type="reset">Cancle</button>
        </li>
    </ul>
</form>
</body>
</html>
```

* UserController.java

```
package com.sch.springboot.controller;


import com.sch.springboot.dto.User;
import com.sch.springboot.service.UserService;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.bind.annotation.RestController;

import java.util.Map;

@Controller
public class UserController {

    UserService userService =  new UserService();

    @ResponseBody
    @PostMapping("/login")
    public Map<String,Object> login(User user){
        return userService.login(user);
    }

    @ResponseBody
    @PostMapping("/signup")
    public Map<String, String> sighup( User user){
        return userService.signUp(user);
    }

}

```

* UserService.java

```
package com.sch.springboot.service;

import com.sch.springboot.dto.User;
import com.sch.springboot.repository.UserRepository;
import org.springframework.stereotype.Service;

import java.util.Map;

@Service
public class UserService {

    UserRepository userRepository = new UserRepository();

    /**
     * ligin : 로그인 비즈니스 로직 처리
     */
    public Map<String,Object> login(User user) {
        System.out.println("UserService login ---> ");
        System.out.println(user.getId()+","+ user.getPass());
        return userRepository.login(user);
    }

    /**
     * sighup : 회원가입 비즈니스 로직 처리
     */
    public Map<String, String> signUp( User user){
        System.out.println("UserService signup ---> ");
        System.out.println(user.getId()+
                ","+ user.getPass()+
                ","+ user.getEmail() +
                "," + user.getName());

        return userRepository.signup(user);
    }
}

```

* UserRepository.java

```
package com.sch.springboot.repository;

import com.sch.springboot.dto.User;
import org.springframework.stereotype.Repository;

import java.util.HashMap;
import java.util.Map;

@Repository
public class UserRepository {
    /**
     * login : 로그인 처리
     */
    public Map<String, Object> login(User user) {
        String did = "test";
        String dpass = "1234";
        Map<String, Object> result = new HashMap<String, Object>();
        if(user.getPass().equals(dpass) && user.getId().equals(did)){
            //로그인 성공
            result.put("status","success");
            result.put("message","로그인 성공!!");
            result.put("id",user.getId());
        } else{
            //로그인 실패
            result.put("status","fail");
            result.put("message","로그인 실패!!");
            result.put("id",user.getId());
        }
        return result;
    }

    /**
     * signup : 회원가입 처리
     */
    public Map<String, String> signup(User user) {
        Map<String, String> result = new HashMap<>();

        result.put("id",user.getId());
        result.put("pass",user.getPass());
        result.put("name",user.getName());
        result.put("email",user.getEmail());
        return result;
    }
}

```

